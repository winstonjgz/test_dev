<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Test de Orientación - Lenguajes y Perfil</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 1rem;
      background-color: #f8f9fa;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .question {
      margin-bottom: 1.5rem;
    }
    .question h3 {
      margin-bottom: 0.5rem;
    }
    .options label {
      display: block;
      margin: 0.25rem 0;
      cursor: pointer;
    }
    .btn {
      margin-top: 1rem;
      padding: 0.6rem 1.2rem;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
    }
    #resultSection {
      display: none;
      margin-top: 2rem;
    }
    #resultText {
      margin-top: 1rem;
      font-size: 1.1rem;
    }
    #categorySummary {
      margin-top: 1rem;
      background: #e9ecef;
      border-radius: 5px;
      padding: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Test de Orientación: ¿Qué Lenguaje y Perfil de Desarrollo es para ti?</h1>
    <form id="testForm">
      <div id="questionsContainer"></div>
      <button class="btn" type="submit">Ver resultados</button>
    </form>
    <div id="resultSection">
      <h2>Resultados</h2>
      <canvas id="resultChart" width="400" height="200"></canvas>
      <p id="resultText"></p>
      <div id="categorySummary"></div>
    </div>
  </div>

<script>
  const languages = ["Python", "JavaScript", "Java", "C#", "PHP", "C++"];

  const categories = {
    "Lógica y resolución": 0,
    "Ciencia de datos": 0,
    "Interfaz/UX": 0,
    "Aplicaciones empresariales": 0,
    "Videojuegos/rendimiento": 0,
    "Automatización/scripting": 0,
    "Web/tecnologías modernas": 0,
  };

  const questions = [
    { text: "¿Prefieres trabajar con datos o con interfaces gráficas?", options: ["Python", "JavaScript"], category:"Ciencia de datos" },
    { text: "¿Te atrae más la inteligencia artificial que el diseño web?", options: ["Python", "JavaScript"], category:"Ciencia de datos" },
    { text: "¿Disfrutas crear sitios web interactivos?", options: ["JavaScript", "PHP"], category:"Web/tecnologías modernas" },
    { text: "¿Qué prefieres: rendimiento o legibilidad del código?", options: ["C++", "Python"], category:"Videojuegos/rendimiento" },
    { text: "¿Te gustaría trabajar en aplicaciones móviles nativas para Android?", options: ["Java", "JavaScript"], category:"Aplicaciones empresariales" },
    { text: "¿Te interesa el desarrollo de videojuegos de alto rendimiento?", options: ["C++", "C#"], category:"Videojuegos/rendimiento" },
    { text: "¿Prefieres trabajar en backend web que en frontend?", options: ["PHP", "Java"], category:"Aplicaciones empresariales" },
    { text: "¿Te interesan los sistemas de control industrial o embebidos?", options: ["C++", "C#"], category:"Videojuegos/rendimiento" },
    { text: "¿Te atrae más la ciencia de datos que el desarrollo web?", options: ["Python", "PHP"], category:"Ciencia de datos" },
    { text: "¿Prefieres trabajar en grandes empresas con soluciones corporativas?", options: ["Java", "C#"], category:"Aplicaciones empresariales" },
    { text: "¿Quieres aprender un lenguaje usado en startups y ciencia de datos?", options: ["Python", "JavaScript"], category:"Ciencia de datos" },
    { text: "¿Te interesa el desarrollo web clásico (CMS, WordPress, etc)?", options: ["PHP", "JavaScript"], category:"Web/tecnologías modernas" },
    { text: "¿Te resulta más cómodo tipar menos y moverte rápido?", options: ["JavaScript", "Python"], category:"Web/tecnologías modernas" },
    { text: "¿Prefieres un lenguaje que se ejecute directamente en el navegador?", options: ["JavaScript", "Python"], category:"Web/tecnologías modernas" },
    { text: "¿Qué valoras más: comunidad y recursos, o rendimiento y control?", options: ["JavaScript", "C++"], category:"Videojuegos/rendimiento" },
    { text: "¿Te interesa el desarrollo multiplataforma con tecnologías Microsoft?", options: ["C#", "Java"], category:"Aplicaciones empresariales" },
    { text: "¿Tienes interés en herramientas como Laravel, Symfony o WordPress?", options: ["PHP", "JavaScript"], category:"Web/tecnologías modernas" },
    { text: "¿Cuál prefieres para automatizar tareas o hacer prototipos rápidos?", options: ["Python", "Java"], category:"Automatización/scripting" },
    { text: "¿Quieres trabajar en desarrollo de APIs y servicios web robustos?", options: ["Java", "Python"], category:"Aplicaciones empresariales" },
    { text: "¿Te interesa la creación de videojuegos con Unity?", options: ["C#", "C++"], category:"Videojuegos/rendimiento" },
    { text: "¿Qué prefieres: un lenguaje interpretado o compilado?", options: ["Python", "C++"], category:"Videojuegos/rendimiento" },
    { text: "¿Prefieres backend tradicional o moderno y basado en servicios?", options: ["PHP", "Java"], category:"Aplicaciones empresariales" },
    { text: "¿Te interesa el scripting, automatización y análisis de datos?", options: ["Python", "C#"], category:"Automatización/scripting" },
    { text: "¿Te atraen los frameworks web como Flask, Django o Express?", options: ["Python", "JavaScript"], category:"Web/tecnologías modernas" },
    { text: "¿Cuál prefieres para construir aplicaciones en la nube empresarial?", options: ["Java", "C#"], category:"Aplicaciones empresariales" },
    { text: "¿Prefieres resolver problemas matemáticos o diseñar experiencias visuales?", options: ["Python", "JavaScript"], category:"Ciencia de datos" },
    { text: "¿Te interesa desarrollar sistemas ERP o CRM empresariales?", options: ["C#", "PHP"], category:"Aplicaciones empresariales" },
    { text: "¿Te interesa construir bots o automatizar con IA?", options: ["Python", "Java"], category:"Automatización/scripting" },
    { text: "¿Qué prefieres: escalabilidad o facilidad de aprendizaje?", options: ["Java", "Python"], category:"Aplicaciones empresariales" },
    { text: "¿Con qué lenguaje te sientes más cómodo para comenzar un proyecto web?", options: ["JavaScript", "PHP"], category:"Web/tecnologías modernas" },
    { text: "¿Qué te parece más interesante: programación orientada a objetos o scripting simple?", options: ["Java", "Python"], category:"Lógica y resolución" },
    { text: "¿Te gustaría desarrollar para dispositivos móviles con Xamarin?", options: ["C#", "Java"], category:"Aplicaciones empresariales" },
    { text: "¿Preferís manipular archivos, datos y automatizar procesos?", options: ["Python", "C++"], category:"Automatización/scripting" },
    { text: "¿Te interesa trabajar con servidores y bases de datos web?", options: ["PHP", "JavaScript"], category:"Web/tecnologías modernas" },
    { text: "¿Preferís trabajar en aplicaciones de escritorio o aplicaciones web?", options: ["C#", "JavaScript"], category:"Aplicaciones empresariales" },
    { text: "¿Qué te resulta más atractivo: rendimiento extremo o facilidad multiplataforma?", options: ["C++", "Python"], category:"Videojuegos/rendimiento" },
    { text: "¿Qué lenguaje se adapta mejor a tu estilo de aprendizaje visual?", options: ["JavaScript", "Python"], category:"Web/tecnologías modernas" },
    { text: "¿Te gustaría crear herramientas de análisis de datos o dashboards?", options: ["Python", "JavaScript"], category:"Ciencia de datos" },
    { text: "¿Qué valorás más: robustez o simplicidad?", options: ["Java", "Python"], category:"Aplicaciones empresariales" },
    { text: "¿Te interesa más la lógica de negocio o la interfaz del usuario?", options: ["Java", "JavaScript"], category:"Aplicaciones empresariales" },
    { text: "¿Querés aprender un lenguaje muy usado en backend tradicional?", options: ["PHP", "Java"], category:"Aplicaciones empresariales" },
    { text: "¿Qué preferís para empezar: facilidad o demanda laboral?", options: ["Python", "Java"], category:"Lógica y resolución" },
    { text: "¿Qué prefieres para apps en tiempo real como chats o juegos web?", options: ["JavaScript", "C++"], category:"Web/tecnologías modernas" },
    { text: "¿Qué te gustaría construir: interfaces modernas o sistemas robustos?", options: ["JavaScript", "Java"], category:"Aplicaciones empresariales" },
    { text: "¿Te interesa un lenguaje ampliamente usado en educación y ciencia?", options: ["Python", "Java"], category:"Ciencia de datos" },
    { text: "¿Cuál usarías para resolver problemas técnicos complejos?", options: ["C++", "Java"], category:"Videojuegos/rendimiento" },
    { text: "¿Qué prefieres para trabajar en la nube: integración o eficiencia?", options: ["Java", "Python"], category:"Aplicaciones empresariales" },
    { text: "¿Cuál te resulta más accesible como primer lenguaje?", options: ["Python", "JavaScript"], category:"Lógica y resolución" }
  ];

  // Función para obtener 15 preguntas aleatorias sin repetición
  function getRandomQuestions(arr, n) {
    const shuffled = [...arr].sort(() => 0.5 - Math.random());
    return shuffled.slice(0, n);
  }

  const selectedQuestions = getRandomQuestions(questions, 15);
  const questionsContainer = document.getElementById("questionsContainer");

  selectedQuestions.forEach((q, index) => {
    const div = document.createElement("div");
    div.className = "question";
    const h3 = document.createElement("h3");
    h3.innerText = `${index + 1}. ${q.text}`;
    div.appendChild(h3);

    const optionsDiv = document.createElement("div");
    optionsDiv.className = "options";
    q.options.forEach(lang => {
      const label = document.createElement("label");
      label.innerHTML = `<input type="radio" name="q${index}" value="${lang.trim()}" required> ${lang.trim()}`;
      optionsDiv.appendChild(label);
    });
    div.appendChild(optionsDiv);
    questionsContainer.appendChild(div);
  });

  document.getElementById("testForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const formData = new FormData(this);

    // Reiniciar puntajes
    const langScores = Object.fromEntries(languages.map(l => [l, 0]));
    const catScores = Object.fromEntries(Object.keys(categories).map(c => [c, 0]));

    // Por cada pregunta respondida sumar puntaje a lenguaje y categoría
    for (let [key, value] of formData.entries()) {
      // Lenguaje
      if (langScores.hasOwnProperty(value)) {
        langScores[value]++;
      }
    }
    // Contar categorías según preguntas respondidas
    selectedQuestions.forEach((q, i) => {
      if (formData.get(`q${i}`)) {
        catScores[q.category]++;
      }
    });

    // Ocultar formulario y mostrar resultados
    document.getElementById("testForm").style.display = "none";
    document.getElementById("resultSection").style.display = "block";

    // Gráfico de barras para lenguajes
    const ctx = document.getElementById("resultChart").getContext("2d");
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: languages,
        datasets: [{
          label: 'Afinidad con lenguaje',
          data: languages.map(lang => langScores[lang]),
          backgroundColor: [
            '#4BC0C0', '#FFCE56', '#36A2EB', '#9966FF', '#FF6384', '#6c757d'
          ]
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false }
        },
        scales: {
          y: { beginAtZero: true, stepSize: 1 }
        }
      }
    });

    // Texto resultado lenguaje dominante
    const maxLang = Object.entries(langScores).reduce((a,b) => a[1] > b[1] ? a : b);
    const resultText = document.getElementById("resultText");
    resultText.innerText = `Según tus respuestas, tu lenguaje más afín es: ${maxLang[0]}. ¡Podrías empezar a aprenderlo!`;

    // Mostrar fortalezas y debilidades en categorías
    const categorySummary = document.getElementById("categorySummary");

    // Ordenar categorías de mayor a menor puntaje
    const sortedCats = Object.entries(catScores).sort((a,b) => b[1] - a[1]);
    const topCat = sortedCats[0];
    const lowCat = sortedCats[sortedCats.length -1];

    categorySummary.innerHTML = `
      <h3>Perfil de fortalezas y áreas a reforzar</h3>
      <p><strong>Fortaleza principal:</strong> ${topCat[0]} (${topCat[1]} respuestas relacionadas)</p>
      <p><strong>Área para mejorar:</strong> ${lowCat[0]} (${lowCat[1]} respuestas relacionadas)</p>
      <p>Te recomendamos enfocar tu aprendizaje en fortalecer tus áreas menos exploradas para un desarrollo equilibrado.</p>
    `;
  });
</script>
</body>
</html>
